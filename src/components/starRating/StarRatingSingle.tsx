// src/components/starRating/StarRatingSingle.tsx

import styled from 'styled-components'
import React from 'react'

type StarRatingSingleProps = {
  fillRatio: number // 0 ~ 100
  size?: number
}

const getSvgSize = (size?: number) => `${size ?? 20}px`

const StyledSvg = styled.svg<{ $size?: number }>`
  width: ${({ $size }) => getSvgSize($size)};
  height: ${({ $size }) => getSvgSize($size)};
`

const StarRatingSingle: React.FC<StarRatingSingleProps> = ({ fillRatio, size = 20 }) => {
  const clampedRatio = Math.max(0, Math.min(100, fillRatio))
  const fillWidth = (clampedRatio / 100) * 1000

  const filledStarPath = `
    "M91.5193 45.3632L73.9412 60.5312L79.2966 83.2148C79.5921 84.4462 79.516 85.7375 79.078 86.9257C78.6399 88.1138 77.8595 89.1455 76.8354 89.8904C75.8113 90.6353 74.5895 91.0599 73.3241 91.1107C72.0588 91.1615 70.8068 90.8361 69.7263 90.1757L49.9998 78.0351L30.2615 90.1757C29.1811 90.8323 27.9306 91.1546 26.6675 91.1019C25.4043 91.0493 24.185 90.6241 23.163 89.8798C22.1411 89.1356 21.3622 88.1056 20.9244 86.9196C20.4866 85.7336 20.4095 84.4445 20.7029 83.2148L26.0779 60.5312L8.49976 45.3632C7.54389 44.5371 6.85259 43.4477 6.51219 42.231C6.17179 41.0143 6.19737 39.7243 6.58575 38.5221C6.97413 37.3199 7.70809 36.2587 8.69596 35.4711C9.68384 34.6836 10.8818 34.2045 12.1404 34.0937L35.1873 32.2343L44.0779 10.7187C44.5591 9.54611 45.3782 8.5431 46.4309 7.8372C47.4836 7.1313 48.7225 6.75439 49.99 6.75439C51.2575 6.75439 52.4963 7.1313 53.5491 7.8372C54.6018 8.5431 55.4209 9.54611 55.9021 10.7187L64.7888 32.2343L87.8357 34.0937C89.0967 34.2003 90.2982 34.6768 91.2897 35.4632C92.2812 36.2497 93.0185 37.3113 93.4093 38.515C93.8001 39.7187 93.827 41.0109 93.4866 42.2298C93.1462 43.4487 92.4537 44.5401 91.4958 45.3671L91.5193 45.3632Z"
  `

  const blankStarPath = `
    M91.5193 45.3632L73.9412 60.5312L79.2966 83.2148C79.5921 84.4462 79.516 85.7375 79.078 86.9257C78.6399 88.1138 77.8595 89.1455 76.8354 89.8904C75.8113 90.6353 74.5895 91.0599 73.3241 91.1107C72.0588 91.1615 70.8068 90.8361 69.7263 90.1757L49.9998 78.0351L30.2615 90.1757C29.1811 90.8323 27.9306 91.1546 26.6675 91.1019C25.4043 91.0493 24.185 90.6241 23.163 89.8798C22.1411 89.1356 21.3622 88.1056 20.9244 86.9196C20.4866 85.7336 20.4095 84.4445 20.7029 83.2148L26.0779 60.5312L8.49976 45.3632C7.54389 44.5371 6.85259 43.4477 6.51219 42.231C6.17179 41.0143 6.19737 39.7243 6.58575 38.5221C6.97413 37.3199 7.70809 36.2587 8.69596 35.4711C9.68384 34.6836 10.8818 34.2045 12.1404 34.0937L35.1873 32.2343L44.0779 10.7187C44.5591 9.54611 45.3782 8.5431 46.4309 7.8372C47.4836 7.1313 48.7225 6.75439 49.99 6.75439C51.2575 6.75439 52.4963 7.1313 53.5491 7.8372C54.6018 8.5431 55.4209 9.54611 55.9021 10.7187L64.7888 32.2343L87.8357 34.0937C89.0967 34.2003 90.2982 34.6768 91.2897 35.4632C92.2812 36.2497 93.0185 37.3113 93.4093 38.515C93.8001 39.7187 93.827 41.0109 93.4866 42.2298C93.1462 43.4487 92.4537 44.5401 91.4958 45.3671L91.5193 45.3632Z
  `

  return (
    <StyledSvg viewBox="0 0 20000 20000" $size={size}>
      <defs>
        <clipPath id="star-clip">
          <rect x="0" y="0" width={fillWidth} height="20000" />
        </clipPath>
      </defs>

      {/* 빈 별 테두리 */}
      <path d={blankStarPath} fill="none" stroke="gold" strokeWidth="1000" />

      {/* 채워진 영역 (clip) */}
      <path d={filledStarPath} fill="#f0d122" clipPath="url(#star-clip)" />
    </StyledSvg>
  )
}

export default StarRatingSingle
